local ArrayField = loadstring(game:HttpGet("https://raw.githubusercontent.com/Hosvile/Refinement/main/MC%3AArrayfield%20Library"))()
-- Documentation url: https://docs.sirius.menu/community/arrayfield

local Window = ArrayField:CreateWindow({
    Name = "Rinns Hub",
    LoadingTitle = "Rinns Hub",
    LoadingSubtitle = "Code by Rinn Ui by Sirius Ui remake by Hosvile",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "RinnsHubConfigs", -- Create a custom folder for your hub/game
        FileName = "RinnsHub"
    },
    Discord = {
        Enabled = true,
        Invite = "Mt9F5nc8Tg", -- The Discord invite code, do not include discord.gg/
        RememberJoins = false -- Set this to false to make them join the discord every time they load it up
    },
    KeySystem = false, -- Set this to true to use our key system
    KeySettings = {
        Title = "ArrayField",
        Subtitle = "Key System",
        Note = "Join the discord (discord.gg/sirius)",
        FileName = "ArrayFieldsKeys",
        SaveKey = false,
        GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like ArrayField to get the key from
        Key = {"Hello",'Bye'},
        Actions = {
            [1] = {
                Text = 'Click here to copy the key link',
                OnPress = function()
                end,
            }
        },
    }
})

local Tab = Window:CreateTab("Tab Example", 4483362458) -- Title, Image

-- Variables to store the running threads
local autoRollConnection
local autoGetAllPotionsConnection

Tab:CreateToggle({
    Name = "Auto Roll",
    Info = {
        Title = 'Auto Roll',
        Image = '12735851647',
        Description = 'Auto Rolls For You',
    },
    CurrentValue = false,
    Flag = "AutoRoll", 
    Callback = function(Value)
        if Value then
            -- Start auto rolling every 0.2 seconds
            autoRollConnection = game:GetService("RunService").Stepped:Connect(function()
                game:GetService("ReplicatedStorage").Remotes.RollEvent:FireServer()
            end)
        else
            -- Stop auto rolling
            if autoRollConnection then
                autoRollConnection:Disconnect()
                autoRollConnection = nil
            end
        end
    end,
})

Tab:CreateToggle({
    Name = "Auto Get All Potions",
    Info = {
        Title = 'Auto Get All Potions',
        Image = '12735851647',
        Description = 'Auto gets all potions Spawned in or spawning in',
    },
    CurrentValue = false,
    Flag = "Toggle2", 
    Callback = function(Value)
        if Value then
            -- Start auto getting all potions
            autoGetAllPotionsConnection = game:GetService("RunService").Stepped:Connect(function()
                local character = game.Players.LocalPlayer.Character
                local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
                
                if humanoidRootPart then
                    for _, potion in pairs(game.Workspace.ActivePotions:GetChildren()) do
                        local basePart = potion:FindFirstChild("Base")
                        if basePart then
                            humanoidRootPart.CFrame = basePart.CFrame
                            wait(0.63) -- Wait 0.63 seconds before moving to the next base
                        end
                    end
                end
            end)
        else
            -- Stop auto getting all potions
            if autoGetAllPotionsConnection then
                autoGetAllPotionsConnection:Disconnect()
                autoGetAllPotionsConnection = nil
            end
        end
    end,
})

local autoDoObbyConnection
local obbyTimer = 0

Tab:CreateToggle({
    Name = "Auto do obby",
    Info = {
        Title = 'Auto do Obby',
        Image = '12735851647',
        Description = 'Automatically does the obby that gives a luck boost',
    },
    CurrentValue = false,
    Flag = "Toggle3", 
    Callback = function(Value)
        if Value then
            -- Teleport and fire proximity prompt immediately when the toggle is turned on
            local function doObby()
                local character = game.Players.LocalPlayer.Character
                local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")

                if humanoidRootPart then
                    -- Find the SwordBlock inside ObbySword
                    local obbySword = workspace:FindFirstChild("ObbySword")
                    local swordBlockInObbySword = obbySword and obbySword:FindFirstChild("SwordBlock")
                    
                    if swordBlockInObbySword then
                        -- Teleport to the SwordBlock inside ObbySword
                        humanoidRootPart.CFrame = swordBlockInObbySword.CFrame
                    end

                    -- Find the SwordBlock in ObbySwordPrompt and fire the proximity prompt
                    local obbySwordPrompt = workspace:FindFirstChild("ObbySwordPrompt")
                    local swordBlockInPrompt = obbySwordPrompt and obbySwordPrompt:FindFirstChild("SwordBlock")
                    
                    if swordBlockInPrompt then
                        local proximityPrompt = swordBlockInPrompt:FindFirstChildWhichIsA("ProximityPrompt")
                        if proximityPrompt then
                            fireproximityprompt(proximityPrompt)
                        end
                    end
                end
            end

            -- Run immediately on toggle
            doObby()

            -- Set up the loop to repeat every 301 seconds
            autoDoObbyConnection = game:GetService("RunService").Stepped:Connect(function(_, deltaTime)
                obbyTimer = obbyTimer + deltaTime

                if obbyTimer >= 301 then
                    obbyTimer = 0 -- Reset the timer after the teleportation
                    doObby() -- Run the obby task again
                end
            end)
        else
            if autoDoObbyConnection then
                autoDoObbyConnection:Disconnect()
                autoDoObbyConnection = nil
                obbyTimer = 0 -- Reset the timer when toggled off
            end
        end
    end,
})
